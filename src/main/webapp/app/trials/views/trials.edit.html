<div class="col-xs-9">
    <div>
        <h2 style="display:inline-block" ng-bind="trial.title"></h2>
        <span class="trial-edit-buttons answers">
            <label for="inp_to_selections">
                <input data-ng-class="{disabled: $state.includes('create')}" id="inp_to_selections" type="radio" data-ng-checked="{{trial.id}}" data-ui-sref="trials.detail({trialId:trial.id})">
                <span>Question Set</span>
            </label>
        </span>
        <span class="errors right" ng-bind="errors"></span>
    </div>

    <div class="clear"></div>

    <form id="myForm" name="trialForm">

        <div class="form-group col-xs-3">

            <!-- Edit Trial Information -->
            <div class="simplePanel" data-ng-click="showSiteForm()">
                <h3>Trial Information</h3>
                <p class="edTrial">Edit Trial Information</p>
            </div>

            <!-- Trial Sites List -->
            <div class="simplePanel">

                <h3>Trial Sites</h3>
                <span>
                    <input id="inp_search" type="text" data-ng-model="search" placeholder="Trial Site Search...">
                    <button id="btn_add_site" class="left btn btn-add-site" type="button" title="Add"
                            data-ng-click="initializeTrialSite();">
                        <span class="glyphicon glyphicon-plus"></span>
                    </button>
                </span>

                <ul class="trialLeaderSelect">
                    <li class="trialLeaderName"
                        data-ng-repeat="trialSite in trial.trialInfo.trialSites._embeddedItems | filter : search"
                        data-ng-click="showSiteForm(trialSite)">
                        <strong ng-bind="trialSite.principalInvestigator"></strong><br>
                        <small>
                            <span data-ng-if="trialSite.trialDirectAddress.address1.length">{{trialSite.trialDirectAddress.address1}}, </span>
                            <span data-ng-if="trialSite.trialDirectAddress.address2.length">{{trialSite.trialDirectAddress.address2}}, </span>
                            <span data-ng-if="trialSite.trialDirectAddress.address4.length">{{trialSite.trialDirectAddress.address3}}, </span>
                            <span data-ng-if="trialSite.trialDirectAddress.address4.length">{{trialSite.trialDirectAddress.address4}}, </span>
                            <span data-ng-if="trialSite.trialDirectAddress.address5.length">{{trialSite.trialDirectAddress.address5}}, </span>
                            <span data-ng-if="trialSite.trialDirectAddress.country.length">{{trialSite.trialDirectAddress.country}}. </span>
                        </small>
                    </li>
                </ul>
            </div>
        </div>


        <!-- Trial Info Start  -->

        <div data-td-id="trialInformationEditor" class="simplePanel col-xs-9"
             data-ng-hide="currentTrialSite">

            <!-- Left Column, Trial Site Information -->
            <div class="trialLeaderBio">

                <div class="trial-info-edit">
                    <div class="form-group">
                        <label for="inp_newTrialInput">Trial Name</label>
                        <span>
                            <input id="inp_newTrialInput" name="tTitle" type="text" class="form-control"
                                   data-ng-model="trial.title" value="{{trial.title}}" required="">
                        </span>
                        <div ng-show="trialForm.$submitted || trialForm.tTitle.$touched">
                            <div class="errors" ng-show="trialForm.tTitle.$error.required">Please supply a title</div>
                        </div>
                    </div>
                </div>

                <div class="list-answers answers">
                    <label>Therapeutic Area</label>
                    <div class="clear"></div>

                    <label data-ng-repeat="therapeuticArea in therapeuticAreas">
                        <input id="inp_therapeuticAreaSelection_{{therapeuticArea.sortOrder}}"
                               name="therapeuticAreaSelection" type="radio" data-ng-model="therapeuticArea.checked"
                               data-ng-click="chooseTherapeuticArea(therapeuticArea)">
                        <span data-ng-bind="therapeuticArea.title"></span>
                    </label>
                    <div ng-show="trial.unselectedTherapeuticArea">
                        <div class="errors">Please specify a Therapeutic Area</div>
                    </div>
                </div>

                <!--
                <div class="list-text input-group">
                </div>
                -->

                <div class="clear"></div>
            </div>


            <!-- Right Column, Trial Site Information -->
            <div class="trialSiteLocation">

                <!-- Trial Information Logo -->
                <div class="form-group">
                    <label class="trialImage">Trial Image/Logo</label>

                        <span class="trialLogoImage">
                            <input id="trialLogo" type="file" ngf-select ng-model="trial.trialInfo.trialLogoPic" name="file"
                                   accept="image/*" ngf-max-size="2MB" ng-change="toggleTrialInfoImage()"
                                   ngf-model-invalid="errorFile" ng-show="trial.trialInfo.needsImageUpload">

                            <i ng-show="trialInfo.trialLogoPic.$error.required">*</i>
                            <i ng-show="trialInfo.trialLogoPic.$error.maxSize">File too large
                                {{errorFile.size / 1000000|number:1}}MB: max 2M</i>
                            <!-- If the model contains the trialLogoPic bytes then the user has just re-uploaded an image or else they've uploaded it for
                                 the first time
                                  Therefore because we don't save the image until later we can't reference /trialInfoImage/{{trial.id}}
                                  as the src to the image as it hasn't been saved/updated
                                  -->
                            <img ngf-thumbnail="trial.trialInfo.trialLogoPic" class="thumb" ng-show="!trial.trialInfo.needsImageUpload">
                            <img data-ng-src="/trialInfoImage/{{trialInfo.id}}" ng-show="!trial.trialInfo.needsImageUpload && trial.trialInfo.hasUploadedImage">
                            <div>
                                <button id="btn_change_trial_logo" ng-click="resetUploadedImage();"
                                        ng-show="!trial.trialInfo.needsImageUpload">Change Logo</button>
                            </div>
                        </span>
                </div>

            </div>


            <div class="clear"></div>


            <!-- Trial Summary -->
            <div class="trial-info-edit">
                <div class="form-group">
                    <label for="inp_trialInfoSummary">Trial Summary</label>
                    <span>
                        <textarea id="inp_trialInfoSummary" name="tSummary"
                                  data-ng-model="trial.trialInfo.summary" class="trialFacility" required="">
                        </textarea>
                        <div ng-show="trialForm.$submitted || trialForm.tSummary.$touched">
                            <div class="errors" ng-show="trialForm.tSummary.$error.required">Please supply a summary</div>
                        </div>
                    </span>
                </div>
            </div>


                <!-- ----------------- -->
                <!-- Trial Description -->
                <!-- ----------------- -->
                <div class="trial-info-edit">
                    <div class="form-group">
                        <label for="inp_trialInfoDescription">Full Description</label>
                    <span>
                        <textarea id="inp_trialInfoDescription" name="tDescription"
                                  data-ng-model="trial.trialInfo.trialFullDescription.fullDescription" style="min-height: 25em" required>
                        </textarea>
                        <div ng-show="trialForm.$submitted || trialForm.tDescription.$touched">
                            <div class="errors" ng-show="trialForm.tDescription.$error.required">Please supply a full description</div>
                        </div>
                    </span>
                </div>
            </div>

        </div>
        <!-- Trial Info End  -->


        <!-- Trial Site Start -->
        <div class="form-group simplePanel col-xs-9" data-ng-repeat="trialSite in trial.trialInfo.trialSites._embeddedItems"
             data-ng-show="currentTrialSite == trialSite">


            <div class="clear"></div>

            <!-- Left Column, Trial Facility Summaries -->
            <div class="trialLeaderBio">

                <div data-td-id="trialSiteEditor{{$index}}">
                    <!-- Trial Facility Name -->
                    <div class="form-group">
                        <label for="inp_trialSiteDirector_{{trialSite.sortOrder}}">Trial Facility Name</label>
                        <input id="inp_trialSiteDirector_{{trialSite.sortOrder}}" type="text" name="trial-site-director"
                               data-ng-model="trialSite.facilityName" size="31" required>
                    </div>

                    <!-- Trial Facility Description -->
                    <div class="form-group">
                        <label for="inp_facility-description-{{trialSite.sortOrder}}">Trial Facility Description</label>
                        <span>
                            <textarea id="inp_facility-description-{{trialSite.sortOrder}}" name="trial-site-facility-description"
                                      id="trial-site-facility-description{{$index}}" name="trial-site-facility-description"
                                      data-ng-model="trialSite.facilityDescription" required>
                            </textarea>
                        </span>
                    </div>

                    <div class="trial-site-logo">
                        <!-- -------------- -->
                        <!-- Trial Site Pic -->
                        <!-- -------------- -->
                        <label for="trial-site-logo{{trialSite.sortOrder}}">Trial Site Pic</label>
                        <input id="trial-site-logo{{trialSite.sortOrder}}" type="file" ngf-select ng-model="trialSite.sitePic"
                               name="siteFile" ng-change="toggleTrialSiteImage(trialSite)"
                               accept="image/*" ngf-max-size="2MB"
                               ngf-model-invalid="errorFile" ng-show="trialSite.needsImageUpload">

                        <img data-ng-src="/trialSiteImage/{{trialSite.id}}"
                             ng-show="!trialSite.needsImageUpload && trialSite.hasUploadedImage">
                        <i ng-show="trialSite.sitePic.$error.required">*required</i><br>
                        <i ng-show="trialSite.sitePic.$error.maxSize">File too large
                            {{errorFile.size / 1000000|number:1}}MB: max 2M</i>
                    </div>

                    <!-- Trial Facility Image REMOVE -->
                    <div class="form-group">
                        <span>
                            <img ngf-thumbnail="trialSite.sitePic" class="thumb"
                                 ng-show="!trialSite.needsImageUpload">
                        </span>
                        <button id="btn_change_site_logo{{trialSite.sortOrder}}" type="button" class="btn btn-remove"
                                ng-click="resetUploadedTrialSiteImage(trialSite);"
                                style="float:right;clear:both"
                                ng-show="!trialSite.needsImageUpload">Change Logo</button>
                    </div>


                    <div class="clear"></div>

                    <!-- Trial Facility Location (Google Map URL) -->
                    <div class="form-group">
                        <label for="inp_trialSiteMap_{{trialSite.sortOrder}}">Trial Facility Location (Google Map URL)</label>
                        <span>
                            <input id="inp_trialSiteMap_{{trialSite.sortOrder}}" type="text" name="trial-site-map"
                                   data-ng-model="trialSite.siteMap" size="31">
                        </span>
                    </div>


                </div>


            </div>

            <!-- Left Column, Trial Facility Address -->
            <div class="trialSiteLocation">

                <!-- Trial Site Address 1 -->
                <div class="form-group">
                    <label for="inp_trialSiteAddress1_{{trialSite.sortOrder}}">Address 1</label>
                    <span>
                       <input id="inp_trialSiteAddress1_{{trialSite.sortOrder}}" type="text" name="trial-site-address1"
                               data-ng-model="trialSite.trialDirectAddress.address1" size="31" required>
                   </span>
                </div>

                <!-- Trial Site Address 2 -->
                <div class="form-group">
                    <label for="inp_trialSiteAddress2_{{trialSite.sortOrder}}">Address 2</label>
                    <span>
                        <input id="inp_trialSiteAddress2_{{trialSite.sortOrder}}" type="text" name="trial-site-address2"
                               data-ng-model="trialSite.trialDirectAddress.address2" size="31">
                    </span>
                </div>

                <!-- Trial Site Address 3 -->
                <div class="form-group">
                    <label for="inp_trialSiteAddress3_{{trialSite.sortOrder}}">Town or City</label>
                    <span>
                        <input id="inp_trialSiteAddress3_{{trialSite.sortOrder}}" type="text" name="trial-site-address3"
                               data-ng-model="trialSite.trialDirectAddress.address3" size="31" required>
                    </span>
                </div>

                <!-- Trial Site Address 4 -->
                <div class="form-group">
                    <label for="inp_trialSiteAddress4_{{trialSite.sortOrder}}">State</label>
                    <span>
                        <input id="inp_trialSiteAddress4_{{trialSite.sortOrder}}" type="text" name="trial-site-address4"
                               data-ng-model="trialSite.trialDirectAddress.address4" size="31" required>
                    </span>
                </div>

                <!-- Trial Site Address 5 -->
                <div class="form-group">
                    <label for="inp_trialSiteAddress5_{{trialSite.sortOrder}}">ZIP Code</label>
                    <span>
                        <input id="inp_trialSiteAddress5_{{trialSite.sortOrder}}" type="text" name="trial-site-address5"
                               data-ng-model="trialSite.trialDirectAddress.address5" size="31" required>
                    </span>
                </div>

                <!-- Trial Site Address (Country) -->
                <div class="form-group">
                    <label for="inp_trialSiteCountry_{{trialSite.sortOrder}}">Country</label>
                    <span>
                        <input id="inp_trialSiteCountry_{{trialSite.sortOrder}}" type="text" name="trial-site-country"
                               data-ng-model="trialSite.trialDirectAddress.country" size="31" required>
                    </span>
                </div>


            </div>

            <div class="clear"></div>

        </div>
        <!-- Trial Site End -->
        <span class="trial-edit-buttons answers">
            <label for="input_save_trial">
                <input id="input_save_trial" ng-click="uploadTrial(trial, trial.trialInfo.trialLogoPic)">
                <span>Save Trial</span>
            </label>
        </span>
    </form>
</div>