*** Settings ***
Documentation
...
Default Tags  ValidTest
Force Tags  AcceptanceTest
Library  Selenium2Library    15

*** Variables ***
${SERVER}         http://trialdirectuat-tekenable.rhcloud.com/#/therapeuticareas
${BROWSER}        Firefox
${DELAY}          1


*** Test Cases ***
Create New Therapeutic Area
    Given  Open Browser To Therapeutic Area Page
    And  Therapeutic Area Page Should Be Open
    Then  Input New Therapeutic Area
    And  Input Questions and Answers
    [Teardown]    Close Browser

Create New Question in Previously Created Therapeutic Area
    [Tags]  4.1
    Given Open Browser To Therapeutic Area Page
    And Therapeutic Area Page Should Be Open
    When I select the Therapeutic Areas
    Then textbox for new question should be visible
    When I enter new question and click add button
    Then textbox for answer should be visible
    [Teardown]    Close Browser

Creation of New Therapeutic Areas Question – Trial Selection
    [Tags]  4.2
    Given I as HCP and Trial Selection webpage is open
    When I select previously created trial
    Then Last created question should appear on screen with no answer options selected
    [Teardown]    Close Browser

Creation of New Therapeutic Areas Question – Trial Search
    [Tags]  4.3
    Given I as HCP, and Trial Search webpage is open
    When I select previously created assessment / search
    Then Newly created question should appear on screen with no answer options selected
    #And The ‘Trials Available’ number should remain the same as it was previously
    [Teardown]    Close Browser

Select Trial
    [Tags]  4.4
    Given  Open Browser to Trial Selection Page
    Then  Trial Selection Page Should Be Open
    And  Create New Trial
    [Teardown]    Close Browser

Search for Trial
    [Tags]  4.5
    Given  Open Browser to Trial Search Page
    Then  Search For Trial
    [Teardown]    Close Browser

*** Keywords ***
Open Browser To Therapeutic Area Page
    Set Selenium Speed    ${DELAY}
    Set Selenium Implicit Wait    20
    Open Browser    ${SERVER}    ${BROWSER}
    Maximize Browser Window

Open Browser to Trial Selection Page
    Wait Until Keyword Succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/div[2]/header/div/div/nav/div/ul/li[2]/a
    Click Element    xpath=html/body/div[2]/header/div/div/nav/div/ul/li[2]/a

Open Browser to Trial Search Page
    Click Element    xpath=html/body/div[2]/header/div/div/nav/div/ul/li[3]/a

Therapeutic Area Page Should Be Open
    Title Should Be    Trial Direct
Trial Selection Page Should Be Open
    Title Should Be    Trial Direct

Input New Therapeutic Area
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    id=newThereapeuticAreaInput
    Input Text    id=newThereapeuticAreaInput   Diabetes
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    //button
    Click Element    //button
Input Questions and Answers
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[3]/input
    Input Text    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[3]/input    Type of Diabetes?
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[3]/span
    Click Element   xpath=html/body/main/div/div/div/div/div[2]/div/form/div[3]/span
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input
    Input Text    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input    Type 1
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    Click Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input
    Input Text    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input    Type 2
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    Click Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[1]/button
    Click Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[1]/button
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[3]/input
    Input Text    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[3]/input    Type of Diabetes?
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[3]/span
    Click Element   xpath=html/body/main/div/div/div/div/div[2]/div/form/div[3]/span
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input
    Input Text    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input    Type 1
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    Click Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input
    Input Text    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input    Type 2
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    Click Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[3]/input
    Input Text    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[3]/input    What is your age?
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[3]/span
    Click Element   xpath=html/body/main/div/div/div/div/div[2]/div/form/div[3]/span
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input
    Input Text    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input    0-18
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    Click Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input
    Input Text    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input    19-35
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    Click Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input
    Input Text    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input    36-70
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    Click Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input
    Input Text    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input    70+
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    Click Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[3]/input
    Input Text    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[3]/input    What is your gender?
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[3]/span
    Click Element   xpath=html/body/main/div/div/div/div/div[2]/div/form/div[3]/span
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input
    Input Text    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input    Female
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    Click Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input
    Input Text    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input    Male
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    Click Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    Capture Page Screenshot    filename=TherapeuticArea.png
Create New Trial
    Click Element    xpath=html/body/main/div/div/div/div/div[2]/form/div[1]/div[2]/label[1]/span
    Input Text    xpath=(//input[@id='newTrialInput'])[2]    Tomas
    Click Element    xpath=html/body/main/div/div/div/div/div[2]/form/div[2]/div[2]/div[1]/span
    Capture Page Screenshot    filename=TrialSelect.png
Search For Trial
    Click Element    xpath=html/body/main/div/div/div/div/div[1]/div[2]/ul/li[2]/a
    Click Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[2]/div[3]/div[2]/label[4]/span
    Click Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[2]/div[4]/div[2]/label[4]/span
    Click Element    xpath=html/body/main/div/div/div/div/div[2]/div/form/div[2]/div[5]/div[2]/label[4]/span
    Capture Page Screenshot    filename=TrialSearch.png
I select the Therapeutic Areas
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div[1]/div/div/div/div[1]/div[2]/ul/li[2]/a
    click element  xpath=html/body/main/div[1]/div/div/div/div[1]/div[2]/ul/li[2]/a
textbox for new question should be visible
    wait until keyword succeeds  20secs    1sec    Page Should Contain Element    xpath=html/body/main/div[1]/div/div/div/div[2]/div/form/div[3]/input
I enter new question and click add button
    input text  xpath=html/body/main/div[1]/div/div/div/div[2]/div/form/div[3]/input    TestQuestion
    wait until keyword succeeds  20secs    1sec    page should contain element    xpath=html/body/main/div[1]/div/div/div/div[2]/div/form/div[3]/span/button
    click element  xpath=html/body/main/div[1]/div/div/div/div[2]/div/form/div[3]/span/button
textbox for answer should be visible
    wait until keyword succeeds  20secs    1sec    page should contain element    xpath=html/body/main/div[1]/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input
    input text  xpath=html/body/main/div[1]/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input    A1
    wait until keyword succeeds  20secs    1sec    page should contain element    xpath=html/body/main/div[1]/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    click element  xpath=html/body/main/div[1]/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    wait until keyword succeeds  20secs    1sec    page should contain element    xpath=html/body/main/div[1]/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input
    input text  xpath=html/body/main/div[1]/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/input    A2
    wait until keyword succeeds  20secs    1sec    page should contain element    xpath=html/body/main/div[1]/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    click element  xpath=html/body/main/div[1]/div/div/div/div[2]/div/form/div[4]/div/div[2]/div/span/button
    Capture Page Screenshot    filename=4_1.png
I as HCP and Trial Selection webpage is open
    Set Selenium Speed    ${DELAY}
    Set Selenium Implicit Wait    20
    Open Browser    http://trialdirectuat-tekenable.rhcloud.com/#/trials    ${BROWSER}
    Maximize Browser Window
I select previously created trial
    wait until keyword succeeds  20secs    1sec    page should contain element    xpath=html/body/main/div[1]/div/div/div/div[1]/div[2]/ul/li[2]/a
    click element    xpath=html/body/main/div[1]/div/div/div/div[1]/div[2]/ul/li[2]/a
Last created question should appear on screen with no answer options selected
    wait until keyword succeeds  20sec    1sec    page should contain element    xpath=html/body/main/div[1]/div/div/div/div[2]/div/form/div[2]/div[2]/div[1]/label[1]/span
    wait until keyword succeeds  20sec    1sec    page should contain element    xpath=html/body/main/div[1]/div/div/div/div[2]/div/form/div[2]/div[2]/div[1]/label[2]/span
    checkbox should not be selected  xpath=html/body/main/div[1]/div/div/div/div[2]/div/form/div[2]/div[2]/div[1]/label[1]/span
    checkbox should not be selected  xpath=html/body/main/div[1]/div/div/div/div[2]/div/form/div[2]/div[2]/div[1]/label[2]/span
I as HCP, and Trial Search webpage is open
    Set Selenium Speed    ${DELAY}
    Set Selenium Implicit Wait    20
    Open Browser    http://trialdirectuat-tekenable.rhcloud.com/#/users    ${BROWSER}
    Maximize Browser Window
I select previously created assessment / search
    wait until keyword succeeds  20sec    1sec    page should contain element   xpath=html/body/main/div[1]/div/div/div/div[1]/div[2]/ul/li[2]/a
    click element   xpath=html/body/main/div[1]/div/div/div/div[1]/div[2]/ul/li[2]/a
Newly created question should appear on screen with no answer options selected
    wait until keyword succeeds  20sec    1sec    page should contain element    xpath=html/body/main/div[1]/div/div/div/div[2]/div/form/div[2]/div[3]/div[2]/label[1]/span
    wait until keyword succeeds  20sec    1sec    page should contain element    xpath=html/body/main/div[1]/div/div/div/div[2]/div/form/div[2]/div[3]/div[2]/label[2]/span
    checkbox should not be selected    xpath=html/body/main/div[1]/div/div/div/div[2]/div/form/div[2]/div[3]/div[2]/label[1]/span
    checkbox should not be selected    xpath=html/body/main/div[1]/div/div/div/div[2]/div/form/div[2]/div[3]/div[2]/label[2]/span















